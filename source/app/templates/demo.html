{% extends "base.html" %}

{% block body %}
  <h1>Kosli docs demo</h1>

  <table>
    <tr colspan="2">
      <td>
        <table>
          <tr>
            <td>
              <div class="attest"
                   data-name="dashboard.pull-request"
                   data-ci-lit="dashboard_pull-request">
                <div>dashboard.pull-request</div>
                <div>[tick]</div>
              </div>
            </td>

            <td>
              <div class="attest"
                   data-name="dashboard.lint"
                   data-ci-lit="dashboard_lint">
                <div>dashboard.lint</div>
                <div>[tick]</div>
              </div>
            </td>

            <td>
              <div class="attest"
                   data-name="dashboard"
                   data-ci-lit="dashboard">
                <div>dashboard</div>
                <div>[tick]</div>
              </div>
            </td>

            <td>
              <div class="attest"
                   data-name="dashboard.unit-test"
                   data-ci-lit="dashboard_unit-test">
                <div>dashboard.unit-test</div>
                <div>[tick]</div>
              </div>
            </td>

            <td>
              <div class="attest"
                   data-name="dashboard.snyk"
                   data-ci-lit="dashboard_snyk">
                <div>dashboard.snyk</div>
                <div>[tick]</div>
              </div>
            </td>

          </tr>
        </table>
      </td>
    </tr>
    <tr>
      <td>
        <div class="ci-yml">
          <div class="line"                       ></div>
          <div class="line"                       ></div>
          <div class="line"                       ></div>
          <div class="line dashboard_pull-request">line for PR</div>
          <div class="line"                       ></div>
          <div class="line"                       ></div>
          <div class="line"                       ></div>
          <div class="line"                       ></div>
          <div class="line dashboard_lint"        >line for lint</div>
          <div class="line"                       ></div>
          <div class="line"                       ></div>
          <div class="line"                       ></div>
          <div class="line"                       ></div>
          <div class="line"                       ></div>
          <div class="line dashboard"             >line for dashboard</div>
          <div class="line dashboard"             >line for dashboard</div>
          <div class="line"                       ></div>
          <div class="line"                       ></div>
          <div class="line"                       ></div>
          <div class="line"                       ></div>
          <div class="line"                       ></div>
          <div class="line dashboard_unit-test"   >line for UT 1</div>
          <div class="line dashboard_unit-test"   >line for UT 2</div>
          <div class="line dashboard_unit-test"   >line for UT 2</div>
          <div class="line"                       ></div>
          <div class="line"                       ></div>
          <div class="line"                       ></div>
          <div class="line"                       ></div>
          <div class="line dashboard_snyk"        >line for snyk</div>
          <div class="line"                       ></div>
          <div class="line"                       ></div>
          <div class="line"                       ></div>
          <div class="line"                       ></div>
        </div>
      </td>
      <td>
        <div class="template-yml">
          <div class="line"                       ></div>
          <div class="line"                       ></div>
          <div class="line"                       ></div>
          <div class="line"                       ></div>
          <div class="line dashboard_pull-request">line PR</div>
          <div class="line"                       ></div>
          <div class="line"                       ></div>
          <div class="line"                       ></div>
          <div class="line"                       ></div>
          <div class="line dashboard_lint"        >line Lint</div>
          <div class="line"                       ></div>
          <div class="line"                       ></div>
          <div class="line"                       ></div>
          <div class="line"                       ></div>
          <div class="line dashboard"             >line dashboard</div>
          <div class="line"                       ></div>
          <div class="line"                       ></div>
          <div class="line"                       ></div>
          <div class="line dashboard_unit-test"   >line unit-test</div>
          <div class="line dashboard_unit-test"   >line unit-test</div>
          <div class="line"                       ></div>
          <div class="line"                       ></div>
          <div class="line"                       ></div>
          <div class="line dashboard_snyk"        >line snyk</div>
          <div class="line dashboard_snyk"        >line snyk</div>
          <div class="line dashboard_snyk"        >line snyk</div>
          <div class="line"                       ></div>
          <div class="line"                       ></div>
          <div class="line"                       ></div>
          <div class="line"                       ></div>
          <div class="line"                       ></div>
        </div>
      </td>
    </tr>
  </table>


{% endblock %}

{% block js %}
<script type="text/javascript">
  $(window).ready(()=> {

    $(".attest").each(function() {
      const $attest = $(this);
      $attest.click(function() {
        const ci_lit = $attest.data("ci-lit");

        const highlight = (name) => {
          const nodes = $(`.${name} .${ci_lit}`);
          $(`.${name} .line`).removeClass('lit');
          nodes.each(function() {
            $(this).addClass('lit');
          });
          nodes.last().scrollIntoView();
        };
        highlight('ci-yml');
        highlight('template-yml');
      });

    });

  });
</script>
{% endblock %}
